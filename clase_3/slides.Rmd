---
title: "rparatodes (3)"
subtitle: "ğŸ“„ leer y reportar datos en R ğŸ“„"
author: "Pau"
date: "20/09/2018"
output:
  xaringan::moon_reader:
    css: ["default", "rladies", "rladies-fonts"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(tidyverse)
library(rmarkdown)
library(readxl)
library(readr)
library(haven)
library(knitr)
library(here)
```

# **Flujo de trabajo orientado a proyectos**

- organizar cada proyecto como una carpeta en sus computadoras

.center[
<img src="images/project.png" width="700">]

---
# **Rutas**

`/home/databases/zzff` es una ruta para llegar a un directorio (como en el navegador de Windows)


R siempre tiene un directorio "actual" de trabajo

```{r}
getwd()
```

Tenemos acceso a los archivos que estan en el directorio actual, o podemos especificar una ruta desde el directorio actual hacia donde esta el archivo que queremos

.
---
- usar la funciÃ³n $here()$ para construir una ruta al leer o escribir archivos $\rightarrow$ crea rutas relativas al directorio sudel proyecto```{r, eval = FALSE}
install.packages('here')
library(here)
```

---
# **Â¿CÃ³mo leer archivos en R?**



.center[
<img src="images/read.png" width="700">]

---
# **Leer archivos (1): readr**

Â¡sirve para leer de manera rÃ¡pida y amigable **datos rectangulares** (como csv, tsv, etc.)!


```{r, eval = FALSE}
install.packages('readr')
library(readr)
```

- **read_csv()**: para leer archivos con coma (â€œ,â€) como separador
 
- **read_csv2()**: para leer archivos con punto y coma (â€œ;â€) como separador
 
- **read_tsv()**: para leer archivos con tabulador (â€œ\tâ€) como separador

---

# **ejemplo: readr**
 
```{r, results = 'hide', message = F}
csv_mipymes <- read_csv(here('clase_3', 'data', 'mipyme_2016.csv'))
```

```{r}
glimpse(csv_mipymes)
```
---
# **Leer archivos (2): readxl**

Â¡hace mÃ¡s sencillo extraer datos de **Excel** y leerlos en R!


```{r, eval = FALSE}
install.packages('readxl')
library(readxl)
```

- **read_xls**: para leer archivos de extensiÃ³n .xls
 
- **read_xlsx**: para leer archivos de extensiÃ³n .xlsx

---

# **ejemplo: readxl**
 
```{r, results = 'hide', message = F}
xlsx_mipymes <- read_xlsx(here('clase_3', 'data', 'mipyme_2016.xlsx'))
```

```{r}
glimpse(xlsx_mipymes)
```
---
# **Leer archivos (3): haven**

Â¡lee archivos de **SPSS**, **SAS** y **STATA**!


```{r, eval = FALSE}
install.packages('haven')
library(haven)
```

- **read_sav**
 
- **read_spss**

- **read_dta** (tambiÃ©n se puede usar **read.dta13** de la librerÃ­a $readstata13$)

---

# **escribir archivos**
 
TambiÃ©n con estas tres librerÃ­as se pueden guardar dataframes como archivos:

- **write_csv**

- **write_dta**

---

# **Â¿QuÃ© es R Markdown?**

1) marco unificado para ciencia de datos

2) combina:
    
    - cÃ³digo
    
    - resultados 
    
    - comentarios en prosa 
  
3) los documentos R Markdown:
     
     - son totalmente reproducibles y automatizables
     
     - admiten muchos formatos de salida
     
---

class: center, middle    

![](https://rmarkdown.rstudio.com/images/RMarkdownOutputFormats.png)


---
#**Instalar R Markdown**

```{r, eval=FALSE}
install.packages("rmarkdown")
install.packages("knitr")
install.packages("tidyverse")

library(rmarkdown)
library(knitr)
library(tidyverse)
```
---
#**DetrÃ¡s de escenas**

1) Cuando le damos `knit` al documento, R Markdown envÃ­a el archivo `.Rmd` a knitr, este ejecuta los fragmentos de cÃ³digo y crea un nuevo documento de formato `.md` que incluye el cÃ³digo y su salida

2) Este archivo generado es luego procesado por `pandoc`, que es responsable de crear el archivo terminado. 

`Ventaja flujo de trabajo de dos pasos:` Â¡se puede crear una amplia gama de formatos de salida!

![](http://r4ds.had.co.nz/images/RMarkdownFlow.png)
---

#**Sintaxis**

- `*cursiva*` y `_cursiva_`

- `**negrita**` y `__negrita__`

- `[link](www.rstudio.com)`

- `# Encabezado 1`

- `## Encabezado 2`

- `### Encabezado 3`

- imagen: `![](camino/a/imagen.png)`

- ` - lista`

---
#**CÃ³digo**

    1) CÃ³digo incrustado: envuelvo el cÃ³digo con contratildes y r, R reemplaza el cÃ³digo 
    en lÃ­nea con sus resultados
   
    2) Fragmentos de cÃ³digo: comienza un trozo (chunk) con ```{r} y lo termino con ```


OpciÃ³n  | Efecto
------  | -------------------
include | Â¿Muestra el fragmento de cÃ³digo de R y su resultado?
echo    | Â¿Muestra el fragmento de cÃ³digo de R?
message | Â¿Muestra los mensajes de salida?
warning | Â¿Muestra las advertencias?
eval    | Â¿EvalÃºa el fragmento de cÃ³digo?

---
# **Â¡Hagamos!**

.center[
<img src="images/open_rmarkdown.png" width="700">]
---
.center[
<img src="images/format_rmarkdown.png" width="700">]
---
class: center, middle

# **Â¡Muchas gracias!**

![](https://media.giphy.com/media/q9lNzUPfLAbBK/giphy.gif)
<!DOCTYPE html>
<html>
  <head>
    <title>intro_r </title>
    <meta charset="utf-8">
    <meta name="author" content="Pau" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# intro_r 
### Pau
### 30/08/2018

---




#驴Qu茅 es R?

**R es un lenguaje de programaci贸n con enfoque al an谩lisis estad铆stico.**

Adem谩s:

- Software libre (no dice qu茅 pod茅s o no hacer con el software)

- De c贸digo abierto (todo el c贸digo de R se inspecciona)

- Funcionalidad adicional est谩 en paquetes que la comunidad contribuye

---

# 驴Qu茅 es un IDE?

- acr贸nimo de Integrated Development Environment (Entorno de Desarrollo Integrado) `\(\rightarrow\)` RStudio es una aplicaci贸n que nos entrega herramientas para hacer m谩s f谩cil el desarrollo de proyectos usando R.

Se ve m谩s o menos as铆:

.center[
&lt;img src="images/rstudio.png" width="600"&gt;]
---
#Instalaci贸n R
Para poder instalar R y RStudio, se siguenn los siguientes pasos:

    - Descargan R desde https://cran.r-project.org/. Eligen la opci贸n que corresponda,
    seg煤n su sistema operativo.
     
    - Instalen R en su PC, como cualquier programa.
    
    - Una vez que R ha quedado correctamente instalado, descarguen RStudio desde                 https://www.rstudio.com/products/rstudio/download/. Eligen la primera 
    opci贸n, es decir, "RStudio Desktop Open Source License" (gratis).
    
    - Instalan RStudio en su PC,  como cualquier programa.

---
#Utilizaci贸n de R

.center[
&lt;img src="images/rstudio_2.png" width="700"&gt;]
---

Si solo abr铆s R en la PC, lo que ver谩s es una consola. Cuando trabajamos en ella escribimos directamente el c贸digo que queremos que se ejecute. El signo `\(&gt;\)` nos indica que R est谩 listo y esperando que escribamos algo.

.center[
&lt;img src="images/r_consola.png" width="400"&gt;]


---

#Tipos de Datos

En R existen cinco tipos de datos b谩sicos:

1) Vector, 2) Matriz, 3) Factor, 4) Data frame, 5) Lista

.center[
&lt;img src="images/data-estructure.png" width="400"&gt;]

---

#Vectores

Un vector es un arreglo de una dimensi贸n.

En R existen tres clases principales de vectores y se crean con la funci贸n combine c():

- Num茅rico


```r
num_vec &lt;- c(-1, 2.5, 3, 4, 5.1)
```

- Character

```r
cha_vec &lt;- c("Mon", "Tue", "Wed", "Thu", "Sat", "Sun")
```

- L贸gico


```r
boo_vec &lt;- c(TRUE, FALSE, FALSE, TRUE, TRUE, FALSE)
```

---

La funci贸n class() nos dice cu谩l es la clase o tipo del vector.


```r
class(num_vec)
```

```
## [1] "numeric"
```

Otra funci贸n importante es length() que nos dice cu谩l es la longitud del vector.


```r
length(num_vec)
```

```
## [1] 5
```

---

#Ejemplo: Ganancias - Ruleta y poker
Mis ganancias de poker por d铆a de la semana son:


```r
poker_gan &lt;- c(150, 178, -6, 166, -80, -119, -142)
poker_gan
```

```
## [1]  150  178   -6  166  -80 -119 -142
```
---

#Nombres de vectores
La funci贸n names() nos permite nombrar los elementos de cada vector.

Por ejemplo, a cada elemento de las ganancias de poker del ejercicio anterior, asignaremos el nombre del d铆a de la semana en que se obtuvieron.


```r
dias &lt;- c("Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun")
names(poker_gan) &lt;- dias
poker_gan
```

```
##  Mon  Tue  Wed  Thu  Fri  Sat  Sun 
##  150  178   -6  166  -80 -119 -142
```

---

# Selecci贸n de elementos en vectores
La selecci贸n de elementos de un vector se realiza indicando las posiciones a seleccionar entre [ ].

Estas posiciones pueden indicarse por medio de un vector num茅rico o de caracteres si los elementos del vector est谩n nombrados.

- Vector num茅rico:


```r
poker_gan[ c(1, 5) ]
```

```
## Mon Fri 
## 150 -80
```

El uso de dos puntos: permiten crear un vector de secuencias num茅ricas:


```r
poker_gan[ 1:3 ]
```

```
## Mon Tue Wed 
## 150 178  -6
```
---
- Nombres:


```r
poker_gan[ c("Mon", "Tue")]
```

```
## Mon Tue 
## 150 178
```

---
# Operaciones con vectores



```r
ruleta_gan &lt;- c(-48, 151, 198, -16, 134, -153, 126)
dias &lt;- c("Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun")
names(ruleta_gan) &lt;- dias

poker_gan + ruleta_gan
```

```
##  Mon  Tue  Wed  Thu  Fri  Sat  Sun 
##  102  329  192  150   54 -272  -16
```

En R para cualquier operaci贸n (+, -, *, /) de vectores, las operaciones son elemento a elemento (element wise).

Por ejemplo, al sumar vectores:

la primera posici贸n del primer vector se suma con la primera posici贸n del segundo vector,

la segunda posici贸n del primer vector se suma con la segunda posici贸n del segundo vector

y as铆 sucesivamente.

---

#Comparaci贸n de elementos
La comparaci贸n de elementos se realiza con los siguientes comandos:

- `\(&gt;\)` mayor a
- `\(&gt;=\)` mayor o igual
- `\(&lt;\)` menor a
- `\(&lt;=\)` menor o igual a
- `\(==\)` igual a
- `\(!=\)` distinto de
- %in% contenido en
Este tipo de operaciones regresan un vector l贸gico dependiendo si la condici贸n se cumple o no.


```r
poker_gan
```

```
##  Mon  Tue  Wed  Thu  Fri  Sat  Sun 
##  150  178   -6  166  -80 -119 -142
```

```r
poker_pos &lt;- poker_gan &gt;= 0
poker_pos
```

```
##   Mon   Tue   Wed   Thu   Fri   Sat   Sun 
##  TRUE  TRUE FALSE  TRUE FALSE FALSE FALSE
```

---

#Matrices

Una matriz es un arreglo de dos dimensiones en el que todos los elementos son del mismo tipo, por ejemplo: num茅ricos

La funci贸n matrix() permite crear la matriz de un vector especificando las dimensiones, por ejemplo:


```r
matrix(data = 1:9, nrow = 3, ncol = 3)
```

```
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
```

En el siguiente vector se presentan los ingresos totales y de lanzamiento de cada pel铆cula de la saga Harry Potter.
---

# Ejemplo: Box Office Mojo: Harry Potter


```r
sales_hp &lt;- c(497066400, 426630300, 401608200, 399302200, 377314200, 
              359788300, 357233500, 328833900, 141823200, 189432500, 
              142414700, 135197600, 99635700, 92756000, 134119300, 
              138752100)
sales_mat &lt;- matrix(sales_hp, nrow = 8)
sales_mat
```

```
##           [,1]      [,2]
## [1,] 497066400 141823200
## [2,] 426630300 189432500
## [3,] 401608200 142414700
## [4,] 399302200 135197600
## [5,] 377314200  99635700
## [6,] 359788300  92756000
## [7,] 357233500 134119300
## [8,] 328833900 138752100
```

---

La funci贸n dim() regresa la dimensi贸n de la matriz (renglones y columnas).


```r
dim(sales_mat)
```

```
## [1] 8 2
```

La funci贸n nrow() regresa el n煤mero de renglones de la matriz y ncol() el n煤mero de columnas.


```r
nrow(sales_mat)
```

```
## [1] 8
```

```r
ncol(sales_mat)
```

```
## [1] 2
```

---
 
#Nombres de matrices
En R es posible agregar nombres a los renglones y columnas de una matriz con las funciones colnames() y rownames(). Considerando los siete t铆tulos de la saga, asignamos los t铆tulos de las pel铆culas a los renglones con la funci贸n rownames():


```r
titles_hp &lt;- c(
  "1. HP and the Sorcerer's Stone",
  "8. HP and the Deathly Hallows Part 2",
  "4. HP and the Goblet of Fire",
  "2. HP and the Chamber of Secrets",
  "5. HP and the Order of the Phoenix",
  "6. HP and the Half-Blood Prince",
  "3. HP and the Prisoner of Azkaban",
  "7. HP and the Deathly Hallows Part 1")
rownames(sales_mat) &lt;- titles_hp
sales_hp &lt;- c("total", "release_date")
colnames(sales_mat) &lt;- sales_hp
sales_mat
```

```
##                                          total release_date
## 1. HP and the Sorcerer's Stone       497066400    141823200
## 8. HP and the Deathly Hallows Part 2 426630300    189432500
## 4. HP and the Goblet of Fire         401608200    142414700
## 2. HP and the Chamber of Secrets     399302200    135197600
## 5. HP and the Order of the Phoenix   377314200     99635700
## 6. HP and the Half-Blood Prince      359788300     92756000
## 3. HP and the Prisoner of Azkaban    357233500    134119300
## 7. HP and the Deathly Hallows Part 1 328833900    138752100
```

---

# Selecci贸n de elementos en una matriz
Al igual que un vector, los elementos de una matriz pueden seleccionarse con un vector de posiciones o un vector de nombres. Pero, en este se define la posici贸n de ambas dimensiones, renglones y columnas [ , ].

Por ejemplo, si queremos obtener una submatriz para las primeras tres pel铆culas de las ventas:


```r
sales_mat[c(1, 4, 7), 1:2]
```

```
##                                       total release_date
## 1. HP and the Sorcerer's Stone    497066400    141823200
## 2. HP and the Chamber of Secrets  399302200    135197600
## 3. HP and the Prisoner of Azkaban 357233500    134119300
```

---

#Operaciones en matrices
Al igual que los vectores, las operaciones son elemento a elemento o element wise.

Siguiendo con el ejemplo de ingresos, para facilitar la lectura de los datos dividimos entre un mill贸n cada valor.


```r
sales_mat_mill &lt;- sales_mat/1e6
sales_mat_mill
```

```
##                                         total release_date
## 1. HP and the Sorcerer's Stone       497.0664     141.8232
## 8. HP and the Deathly Hallows Part 2 426.6303     189.4325
## 4. HP and the Goblet of Fire         401.6082     142.4147
## 2. HP and the Chamber of Secrets     399.3022     135.1976
## 5. HP and the Order of the Phoenix   377.3142      99.6357
## 6. HP and the Half-Blood Prince      359.7883      92.7560
## 3. HP and the Prisoner of Azkaban    357.2335     134.1193
## 7. HP and the Deathly Hallows Part 1 328.8339     138.7521
```

Lo mismo sucede con un vector. Supongamos que el siguiente vector contiene el n煤mero de cines en los que se exhibi贸 cada pel铆cula.


```r
theaters_vec &lt;- c(3672, 4375, 3858, 3682, 4285, 4325, 3855, 4125)
theaters_vec
```

```
## [1] 3672 4375 3858 3682 4285 4325 3855 4125
```

Calculemos el ingreso promedio por cada cine para el total de ingresos y en la fecha de lanzamiento.


```r
sales_mat_avg &lt;- sales_mat/theaters_vec
sales_mat_avg
```

```
##                                          total release_date
## 1. HP and the Sorcerer's Stone       135366.67     38622.88
## 8. HP and the Deathly Hallows Part 2  97515.50     43298.86
## 4. HP and the Goblet of Fire         104097.51     36914.13
## 2. HP and the Chamber of Secrets     108447.09     36718.52
## 5. HP and the Order of the Phoenix    88054.66     23252.21
## 6. HP and the Half-Blood Prince       83188.05     21446.47
## 3. HP and the Prisoner of Azkaban     92667.57     34791.00
## 7. HP and the Deathly Hallows Part 1  79717.31     33636.87
```

#Factores

Un factor en R es un tipo de vector con un enfoque estad铆stico que se usa para variables categ贸ricas.

- La caracter铆stica de un factor es que tiene un n煤mero limitado de valores llamados niveles.

- Existen dos tipos de variables categ贸ricas: nominal u ordinal. En R un factor tambi茅n se puden definir de esta forma.

---
#Variable categ贸rica nominal
Un ejemplo de variable categ贸rica nominal es el sexo de una persona: femenino (F) o masculino (M)

En R un factor se define con la funci贸n factor().

```r
sex_vec &lt;- c("F", "M", "M", "F", "M")
sex_fct &lt;- factor(sex_vec)
sex_fct
```

```
## [1] F M M F M
## Levels: F M
```

En autom谩tico define los niveles del factor y los ordena en orden alfab茅tico. Si se desea cambiar esto el argumento levels = c() permite asignar un vector de niveles espec铆fico.


```r
sex_lev_fct &lt;- factor(sex_vec, levels = c("M", "F"))
sex_lev_fct
```

```
## [1] F M M F M
## Levels: M F
```

---
#Variable categ贸rica ordinal

Una variable categ贸rica ordinal como el nombre lo dice tiene orden en los niveles del factor.

Para dar orden a los niveles en R se modifica el argumento ordered = TRUE de la funci贸n factor().

Se tiene el siguiente vector de temperaturas y se desea crear un factor ordenado de menor temperatura a mayor temperatura.


```r
temp_vec &lt;- c("High", "Low", "Medium", "Low", 
              "Low", "Medium", "High", "Low", 
              "Medium", "Low", "Low")
temp_fct &lt;- factor(temp_vec, 
                   levels = c("Low", "Medium", "High"), 
                   ordered = T)
temp_fct
```

```
##  [1] High   Low    Medium Low    Low    Medium High   Low    Medium Low   
## [11] Low   
## Levels: Low &lt; Medium &lt; High
```

Ahora los niveles tiene una jerarqu铆a.

Una forma de modificar las etiquetas de los niveles es reasignando un vector.


```r
levels(temp_fct)
```

```
## [1] "Low"    "Medium" "High"
```

```r
levels(temp_fct) &lt;- c("L", "M", "H")
temp_fct
```

```
##  [1] H L M L L M H L M L L
## Levels: L &lt; M &lt; H
```
---

#Dataframe

- Un dataframe es un objeto de dos dimensiones en R. Puede verse como un arreglo de vectores de la misma dimensi贸n, similar a una matriz.

- La ventaja de un dataframe, es que a diferencia de una matriz, los vectores o columnas pueden ser de diferentes tipos.

Puedo crear dataframes con la funci贸n data.frame().

---

Una forma de crear un dataframe es asignando vectores.


```r
muestra_df &lt;- data.frame(secuencia = 1:5,
                         aleatorio = rnorm(5),
                         letras = c("a", "b", "c", "d", "e"))
muestra_df
```

```
##   secuencia  aleatorio letras
## 1         1 -1.2205469      a
## 2         2  1.4234340      b
## 3         3 -1.1243452      c
## 4         4 -0.4649135      d
## 5         5 -2.3252691      e
```

---

O bien, se pude transformar una matriz con la misma funci贸n. Tomemos los datos de los ingresos de las pel铆culas de la saga de HP y hagamos una matriz.


```r
sales_df &lt;- data.frame(sales_mat)
sales_df
```

```
##                                          total release_date
## 1. HP and the Sorcerer's Stone       497066400    141823200
## 8. HP and the Deathly Hallows Part 2 426630300    189432500
## 4. HP and the Goblet of Fire         401608200    142414700
## 2. HP and the Chamber of Secrets     399302200    135197600
## 5. HP and the Order of the Phoenix   377314200     99635700
## 6. HP and the Half-Blood Prince      359788300     92756000
## 3. HP and the Prisoner of Azkaban    357233500    134119300
## 7. HP and the Deathly Hallows Part 1 328833900    138752100
```
---

# Nombres de dimensiones
Al igual que matrices, las funciones rownames() y colnames() permiten nombrar los renglones y columnas del objeto.


```r
colnames(sales_df) &lt;- c("total_grosses", "opening_grosses")
sales_df
```

```
##                                      total_grosses opening_grosses
## 1. HP and the Sorcerer's Stone           497066400       141823200
## 8. HP and the Deathly Hallows Part 2     426630300       189432500
## 4. HP and the Goblet of Fire             401608200       142414700
## 2. HP and the Chamber of Secrets         399302200       135197600
## 5. HP and the Order of the Phoenix       377314200        99635700
## 6. HP and the Half-Blood Prince          359788300        92756000
## 3. HP and the Prisoner of Azkaban        357233500       134119300
## 7. HP and the Deathly Hallows Part 1     328833900       138752100
```
---
# Selecci贸n de elementos
Para dataframes, ademas de seleccionar posiciones de renglones y columnas con [ , ], se puede usar el signo $.


```r
sales_df$total_grosses
```

```
## [1] 497066400 426630300 401608200 399302200 377314200 359788300 357233500
## [8] 328833900
```


---
#Funciones 煤tiles para data frames
Existen algunas que ayudan a tratar dataframes.

head():

```r
head(sales_df)
```

```
##                                      total_grosses opening_grosses
## 1. HP and the Sorcerer's Stone           497066400       141823200
## 8. HP and the Deathly Hallows Part 2     426630300       189432500
## 4. HP and the Goblet of Fire             401608200       142414700
## 2. HP and the Chamber of Secrets         399302200       135197600
## 5. HP and the Order of the Phoenix       377314200        99635700
## 6. HP and the Half-Blood Prince          359788300        92756000
```

str()

```r
str(sales_df)
```

```
## 'data.frame':	8 obs. of  2 variables:
##  $ total_grosses  : num  4.97e+08 4.27e+08 4.02e+08 3.99e+08 3.77e+08 ...
##  $ opening_grosses: num  1.42e+08 1.89e+08 1.42e+08 1.35e+08 9.96e+07 ...
```
---

dim(), nrow() y ncol()

```r
dim(sales_df)
```

```
## [1] 8 2
```

```r
nrow(sales_df)
```

```
## [1] 8
```

```r
ncol(sales_df)
```

```
## [1] 2
```

---

#Ejemplo: 


```r
datos &lt;- read.csv('data/datos.csv')

str(datos)
```

```
## 'data.frame':	1704 obs. of  6 variables:
##  $ pais          : Factor w/ 142 levels "Afghanistan",..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ continente    : Factor w/ 5 levels "Africa","Americas",..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ anioo         : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
##  $ esperanza_vida: num  28.8 30.3 32 34 36.1 ...
##  $ poblacion     : int  8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
##  $ pbi_per_capita: num  779 821 853 836 740 ...
```

---


```r
head(datos)
```

```
##          pais continente anioo esperanza_vida poblacion pbi_per_capita
## 1 Afghanistan       Asia  1952         28.801   8425333       779.4453
## 2 Afghanistan       Asia  1957         30.332   9240934       820.8530
## 3 Afghanistan       Asia  1962         31.997  10267083       853.1007
## 4 Afghanistan       Asia  1967         34.020  11537966       836.1971
## 5 Afghanistan       Asia  1972         36.088  13079460       739.9811
## 6 Afghanistan       Asia  1977         38.438  14880372       786.1134
```

---


```r
table(datos$continente)
```

```
## 
##   Africa Americas     Asia   Europe  Oceania 
##      624      300      396      360       24
```

---


```r
plot(datos$esperanza_vida, datos$pbi_per_capita)
```

![](slides_files/figure-html/unnamed-chunk-36-1.png)&lt;!-- --&gt;

---
#Listas

Una lista en R es un objeto que permite una estructura de datos complicada, una s煤per estructura. Esto porque permite reunir diferentes tipos de objetos:

    - Vectores
    - Matrices
    - Dataframes
    - Listas

Es decir, 隆puede almacenar cualquier cosa! 
---

##Crear una lista

La funci贸n list() permite crear una lista.


```r
ejem_list &lt;- list(
  vector = 1:10,
  matriz = matrix(1:9, nrow = 3),
  dataframe = mtcars[1:5,]
)
ejem_list
```

```
## $vector
##  [1]  1  2  3  4  5  6  7  8  9 10
## 
## $matriz
##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9
## 
## $dataframe
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
```

---

##Selecci贸n de elementos en una lista

La selecci贸n de elementos de una lista puede realizarse de tres maneras:

       1)    [ ]


          
          ```r
          ejem_list[1]
          ```
          
          ```
          ## $vector
          ##  [1]  1  2  3  4  5  6  7  8  9 10
          ```


       2)    [[ ]]
       
       
          
          ```r
          ejem_list[[1]]
          ```
          
          ```
          ##  [1]  1  2  3  4  5  6  7  8  9 10
          ```
---
       
      3)     $  
      
      
          
          ```r
          ejem_list$vector
          ```
          
          ```
          ##  [1]  1  2  3  4  5  6  7  8  9 10
          ```
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
